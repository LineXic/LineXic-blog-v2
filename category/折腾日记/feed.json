{
    "version": "https://jsonfeed.org/version/1",
    "title": "LineXic书屋 • All posts by \"折腾日记\" category",
    "description": "LineXic博客-一个专注知识分享学习生活和日常的博客，因为里面的故事很精彩叫其书屋-基于hexo主题搭建",
    "home_page_url": "https://linexic.top",
    "items": [
        {
            "id": "https://linexic.top/2024/08/22/discuz-install-riji/",
            "url": "https://linexic.top/2024/08/22/discuz-install-riji/",
            "title": "记一次Discuz!Q的宝塔部署全过程",
            "date_published": "2024-08-21T16:00:00.000Z",
            "content_html": "<blockquote>\n<p>本文章部分字段和全部图片来源于<a href=\"https://doc.q.discuz.vip/\">文档</a></p>\n</blockquote>\n<h1 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h1><blockquote>\n<p>再小众，也有自己的圈子</p>\n</blockquote>\n<p>相信很多在互联网深耕多年的人都有过要开论坛的想法吧，我之前也想过开一个论坛，这一个Discuz!Q是我开的第二个论坛，第一个论坛使用wp搭配zibi搭建的，当时还发了一个Q动态来分享我的喜悦</p>\n<p><img src=\"https://img.linexic.top/file/328df091edd14938918da.png\" alt=\"zibi\"></p>\n<h1 id=\"正文\"><a href=\"#正文\" class=\"headerlink\" title=\"正文\"></a>正文</h1><blockquote>\n<p>DiscuzQ 拥有完全开源、提供丰富接口、前后端分离、轻量化、数据独立可控、敏捷上云、快速变现七大能力。</p>\n</blockquote>\n<h2 id=\"1-安装宝塔\"><a href=\"#1-安装宝塔\" class=\"headerlink\" title=\"1.安装宝塔\"></a>1.安装宝塔</h2><p>视服务器系统不同，宝塔官方给用户提供了不同的安装方案</p>\n<p>Centos&#x2F;OpenCloud&#x2F;Alibaba稳定版9.0.0</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install -y wget &amp;&amp; wget -O install.sh https://download.bt.cn/install/install_lts.sh &amp;&amp; bash install.sh ed8484bec</span><br></pre></td></tr></table></figure>\n\n<p>Debian 安装脚本稳定版9.0.0</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget -O install.sh https://download.bt.cn/install/install_lts.sh &amp;&amp; bash install.sh ed8484bec</span><br></pre></td></tr></table></figure>\n\n<p>Ubuntu&#x2F;Deepin 安装脚本稳定版9.0.0</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget -O install.sh https://download.bt.cn/install/install_lts.sh &amp;&amp; <span class=\"built_in\">sudo</span> bash install.sh ed8484bec</span><br></pre></td></tr></table></figure>\n\n<p>稳定版9.0.0 通用安装脚本</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">url=https://download.bt.cn/install/install_lts.sh;<span class=\"keyword\">if</span> [ -f /usr/bin/curl ];<span class=\"keyword\">then</span> curl -sSO <span class=\"variable\">$url</span>;<span class=\"keyword\">else</span> wget -O install_lts.sh <span class=\"variable\">$url</span>;<span class=\"keyword\">fi</span>;bash install_lts.sh ed8484bec</span><br></pre></td></tr></table></figure>\n\n<p>正式版9.1.0 通用安装脚本</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> [ -f /usr/bin/curl ];<span class=\"keyword\">then</span> curl -sSO https://download.bt.cn/install/install_panel.sh;<span class=\"keyword\">else</span> wget -O install_panel.sh https://download.bt.cn/install/install_panel.sh;<span class=\"keyword\">fi</span>;bash install_panel.sh ed8484bec</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>本文演示使用Ubuntu系统，PHP7.4为例，下面将默认你已经安装并熟练使用宝塔面板</p>\n</blockquote>\n<h3 id=\"安装扩展\"><a href=\"#安装扩展\" class=\"headerlink\" title=\"安装扩展\"></a>安装扩展</h3><p>首先安装PHP扩展<code>fileinfo</code>和<code>exif</code>，点击【软件商城】找到【设置】，找如下图<br><img src=\"https://main.qcloudimg.com/raw/63a722f7fd3a159978343331d14d9736.png\" alt=\"PHP扩展\"></p>\n<p>找到PHP版本，点击设置，以7.4为例（图片是7.2）<br><img src=\"https://main.qcloudimg.com/raw/b63aed08a014d1821f75281192561aad.png\" alt=\"7.4\"></p>\n<p>在弹出的 【php 管理】窗口中，单击【安装扩展】，进行安装扩展设置<br><img src=\"https://main.qcloudimg.com/raw/189db4e283e426bf9d704e647c3349e3.png\" alt=\"扩展\"></p>\n<p>点击对应插件并确认安装，如图<br><img src=\"https://main.qcloudimg.com/raw/35c37af44765699060f45a2b3f672df5.png\" alt=\"安装\"></p>\n<h3 id=\"删除禁用函数\"><a href=\"#删除禁用函数\" class=\"headerlink\" title=\"删除禁用函数\"></a>删除禁用函数</h3><p>Discuz！Q 需删除禁用的函数<code> putenv</code>、<code>readlink</code>、<code>symlink</code>、<code>shell_exec</code>，部署前需对 PHP 进行相关配置</p>\n<p><img src=\"https://main.qcloudimg.com/raw/0c31e34664a77eeb07cc3a517b19dae3.png\" alt=\"禁用函数\"></p>\n<h3 id=\"创建站点\"><a href=\"#创建站点\" class=\"headerlink\" title=\"创建站点\"></a>创建站点</h3><p><img src=\"https://main.qcloudimg.com/raw/59f1d176aa8cd67b6fc21bea433e802a.png\" alt=\"创建站点\"><br>创建并填写信息<br><img src=\"https://main.qcloudimg.com/raw/e447eebc5b027ee24615721c18085d0c.png\" alt=\"填写\"></p>\n<ul>\n<li>MySQL使用5.7.9以上</li>\n<li>PHP使用7.2版本以上，最好使用PHP7.4</li>\n<li>上传并解压<a href=\"https://www.123pan.com/s/PVUuVv-Ffd8.html\">源码</a></li>\n</ul>\n<h3 id=\"修改配置\"><a href=\"#修改配置\" class=\"headerlink\" title=\"修改配置\"></a>修改配置</h3><p>在宝塔控制台中，单击【网站】，并选择已创建 Discuz！Q 站点，单击【设置】并点击网站目录</p>\n<p><img src=\"https://main.qcloudimg.com/raw/266a9747c34988e8c1c4c438b88793c9.png\" alt=\"设置\"><br>运行目录填写<code>/public</code><br><img src=\"https://main.qcloudimg.com/raw/7da0693dcb1f6c27ce6f69ec2f50bbfb.png\" alt=\"修改\"></p>\n<h3 id=\"设置伪静态并修改Nginx\"><a href=\"#设置伪静态并修改Nginx\" class=\"headerlink\" title=\"设置伪静态并修改Nginx\"></a>设置伪静态并修改Nginx</h3><p>点击伪静态添加如下代码</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">location / &#123;</span><br><span class=\"line\">  try_files $uri $uri/ /index.<span class=\"property\">php</span>?$query_string;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>接下来</p>\n<ul>\n<li>单击【软件商城】，并查找到您安装的 Nginx。</li>\n<li>单击 Nginx 操作栏的【设置】。</li>\n<li>在弹出的【nginx管理】窗口中，单击【配置修改】</li>\n<li>在【配置修改】中查找到<code>gzip_types</code>字段并在前端添加<code>application/json</code>和末尾处添加<code>application/vnd.api+json</code>代码后重启Nginx服务</li>\n</ul>\n<p><img src=\"https://main.qcloudimg.com/raw/74128e9f20252192ced5a0fc7a1e6ad4.png\" alt=\"Nginx\"></p>\n<p>接下来访问你的站点愉快游玩吧，安装栏中的表前缀是可以不填的，其他在创建站点时都有，站点信息、管理员姓名和密码可以自定义</p>\n",
            "tags": [
                "Discuz!Q",
                "宝塔"
            ]
        }
    ]
}